# 멀티 스레드

운영체제는 실행 중인 프로그램을 프로세스(process)로 관리한다. 멀티 태스킹(multi tasking)은 두 가지 이상의 작업을 동시에 처리하는 것이다.

이때 운영체제는 멀티 프로세스를 생성하여 처리한다.

## 스레드(thread)

스레드는 작업의 흐름 즉 코드의 실행 흐름이다. 하나의 프로세스가 여러 개의 작업을 수행할 수 있는데 이는 멀티 스레드가 있기 때문이다.
프로세스 내의 스레드가 두 개라면 두 개의 실행 흐름이 생긴다는 의미이다.

## 멀티 프로세스

각각의 멀티 프로세스는 서로 독립적이므로 하나의 프로세스에 오류가 생겨도 다른 프로세스에 영향을 끼치지 않는다.

멀티 스레드는 하나의 프로세스 내부에서 생기기 때문에 하나의 스레드가 예외를 발생시키면 프로세스가 종료되므로 다른 스레드에도 영향을 끼친다.

## 멀티 스레드 프로그래밍

모든 자바 프로그램은 메인 스레드(main thread)가  main() 메소드를 실행하며 시작된다. 첫 코드부터 순차적으로 실행되며 마지막 코드를 실행하거나 return문을 만나면 실행을 종료한다.

### thread 클래스

java.lang 패키지에 있는 Thread 클래스를 사용하여 작업 스레드 객체를 만들 수 있다.

```
 Thread thread = new Thread(Runnable target);  // Runnable은 스레드가 작업을 실행할 때 사용하는 인터페이스
```
이렇게 target 이라는 객체를 thread에 넣어 생성자를 호출하면 된다.

이는 익명구현 객체로 더 간단히 만들 수 있다.
```
 Thread thread = new Thread( new Runnable() {
   @Override
   public void run() {...}
 } );
```
Runnable의 run() 메소드를 오버라이드한다.

```
import java.awt.*;

public class ThreadExam {
    public static void main(String[] args) {

        Toolkit toolkit = Toolkit.getDefaultToolkit();  // beep음을 사용하기 위해 사용

        Thread thread = new Thread() {
            @Override
            public void run() {

                for (int i = 0; i < 5; i++) {
                    toolkit.beep();
                    try {
                        Thread.sleep(1000);   // tololkit.beep()을 실행하고 1초간 실행을 멈춘다. 1000은 1초이다. 즉 1초마다 비프음이 난다.
                    } catch (Exception e) {}
                }
            }
        };

        thread.start();  // thread를 실행시키는 코드

        for (int i = 0; i < 5; i++) {
            System.out.println("비프음");
            try {
                Thread.sleep(1000);
            } catch (Exception e) {}
        }
    }
}
```
thread를 사용하지 않으면 비프음과 "비프음"의 출력이 동시에 일어날 수 없다. 왜냐하면 main()의 실행흐름이 1개이기 때문에 비프음이 울리는 코드가 끝난 후 출력하는 코드가 실행된다.

하지만 thread를 이용하여 작업 스레드를 만들면 main(), thread 이렇게 실행흐름이 2개이므로 main()이 thread를 실행하고 바로 출력하는 코드를 실행한다.
그러면 비프음이 울리는 코드와 출력하는 코드가 동시에 실행될 수 있다.


